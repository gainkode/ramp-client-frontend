<app-admin-page-header
  [title]="'Transaction Lifeline'"
  [items]="['Home', 'Transactions']"
  [active_item]="'Transaction (ID) '"
>
</app-admin-page-header>

<ng-container *ngIf=" transactionLifelineStatusItems$ | async as liflinesStatusItems; else loading">
  <mat-card class="mb-3">
    <mat-card-content>
      Creating: {{ creatingTransactionStatus.lifelineId }}

      <mat-stepper [linear]="false" #stepper labelPosition="bottom">
        <mat-step
          *ngFor="let lifeLineStatus of creatingFinalTransactionStatuses" 
          [editable]="lifeLineStatus.value['transactionLifelineStatusId']">
          <form>
            <ng-template matStepLabel>{{ lifeLineStatus['statusName'] || lifeLineStatus.key }}</ng-template>
            <p>{{ lifeLineStatus.value['transactionLifelineStatusId'] }}</p>
          </form>
        </mat-step>
      </mat-stepper>
    </mat-card-content>
  </mat-card>

  <mat-card>
    <mat-card-content>
      Updating

      <mat-vertical-stepper [linear]="false" #stepper>
        <mat-step *ngFor="let item of updatingTransactionStatuses">
          <ng-template matStepLabel>{{
            item.lifelineId
          }}</ng-template>
          <mat-stepper [linear]="false" #stepper labelPosition="bottom">
            <mat-step *ngFor="let lifeLineStatus of updatingFinalTransactionStatuses">
              <form>
                <ng-template matStepLabel>{{ lifeLineStatus['statusName'] || lifeLineStatus.key }}</ng-template>
                <p>{{ lifeLineStatus.value["transactionLifelineStatusId"] }}</p>
              </form>
            </mat-step>
          </mat-stepper>
        </mat-step>
      </mat-vertical-stepper>
    </mat-card-content>
  </mat-card>
</ng-container>

<ng-template #loading>
  <app-spinner></app-spinner>
</ng-template>
