<h3>Info</h3>
<div *ngIf="inProgress">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  <br />
</div>
<div class="form-element" *ngIf="errorMessage !== ''">
  <div class="form-error-box">
    {{ errorMessage }}
  </div>
  <br />
</div>
<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <!-- Account Id -->
  <mat-form-field class="form-element-disabled">
    <mat-label>Account ID</mat-label>
    <input type="text" matInput [value]="accountId" disabled />
  </mat-form-field>

  <!-- Email -->
  <mat-form-field class="form-element-disabled">
    <mat-label>Email</mat-label>
    <input type="text" matInput [value]="email" disabled />
  </mat-form-field>

  <div *ngIf="kycCompleted()">
    <!-- Country -->
    <mat-form-field class="form-element-disabled">
      <mat-label>Country</mat-label>
      <input type="text" matInput [value]="countryName" disabled />
    </mat-form-field>
  </div>

  <div *ngIf="!kycCompleted()">
    <!-- First Name -->
    <mat-form-field class="form-element">
      <mat-label>First Name</mat-label>
      <input type="text" matInput formControlName="firstName" placeholder="Type your first name" />
      <mat-error *ngIf="this.userForm.get('firstName')?.hasError('required')">
        Please specify your First Name
      </mat-error>
    </mat-form-field>

    <!-- Last Name -->
    <mat-form-field class="form-element">
      <mat-label>Last Name</mat-label>
      <input type="text" matInput formControlName="lastName" placeholder="Type your last name" />
      <mat-error *ngIf="this.userForm.get('lastName')?.hasError('required')">
        Please specify your Last Name
      </mat-error>
    </mat-form-field>

    <!-- Country -->
    <mat-form-field class="form-element">
      <mat-label>Country</mat-label>
      <input type="country" placeholder="Country" aria-label="Country" matInput formControlName="country"
        [matAutocomplete]="auto" maxlength="50" placeholder="Select your country" required />
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let c of filteredCountries | async" [value]="c.name">
          <app-dropdown-item itemValue="{{ c.name }}" imageClass="country-flag"
            imageSource="assets/svg-country-flags/{{ getCountryFlag(c.code2) }}"></app-dropdown-item>
        </mat-option>
      </mat-autocomplete>
      <mat-error *ngIf="this.userForm.get('country')?.hasError('required')">
        Please specify country
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Address -->
  <div *ngIf="address!==''">
    <mat-form-field class="form-element-disabled">
      <mat-label>Address</mat-label>
      <input type="text" matInput [value]="address" disabled />
    </mat-form-field>
  </div>

  <!-- Phone -->
  <mat-form-field class="form-element">
    <mat-label>Phone</mat-label>
    <input type="text" matInput formControlName="phone" maxlength="50" placeholder=""
      placeholder="Type your phone number" required />
    <mat-error *ngIf="this.userForm.get('phone')?.hasError('required')">
      Please specify your phone number
    </mat-error>
  </mat-form-field>

  <!-- Account Currency -->
  <mat-form-field class="form-element">
    <mat-label>Account Currency</mat-label>
    <mat-select formControlName="currency" required>
      <mat-option *ngFor="let item of currencies" [value]="item.id">
        {{ item.title }}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="this.userForm.get('currency')?.hasError('required')">
      Please specify your account currency
    </mat-error>
  </mat-form-field>

  <div *ngIf="inProgress">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>

  <div class="form-element">
    <button class="main-button main-button-accent" type="submit">SAVE</button>
  </div>
</form>