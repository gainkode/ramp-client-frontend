<div class="__profile-settings-personal-info-container">
    <div class="__profile-settings-personal-info-common-container">
        <div class="__profile-settings-personal-info-avatar-area">

            <div *ngIf="avatarPath===''" class="__profile-settings-personal-info-no-avatar"></div>
            <img *ngIf="avatarPath!==''" class="__profile-settings-personal-info-avatar-image" [src]="avatarPath"
                alt="Avatar">

            <input #avatarInput class="__profile-settings-personal-info-avatar-loader" type="file" accept="image/*"
                (change)="uploadAvatar($event)">
            <div class="__profile-settings-personal-info-avatar-button">
                <button class="__table-button" (click)="avatarInput.click()">
                    <mat-icon style="font-size: 20px;">edit</mat-icon>
                </button>
            </div>
        </div>
        <mat-progress-bar *ngIf="uploadProgress" color="accent" mode="determinate" [value]="uploadProgress">
        </mat-progress-bar>
        <div class="__profile-settings-personal-info-verification-container">
            <h2 class="__profile-settings-personal-verification-level">
                {{userView.kycLevel==='' ? 'Not verified' : userView.kycLevel}}
            </h2>
            <h2 class="__profile-settings-personal-name">
                {{userView.fullName}}
            </h2>
            <div *ngIf="userView.kycComplete===false && !userView.kycVerificationAvailable"
                class="__profile-settings-personal-verification-status-container __profile-settings-personal-verification-status-success">
                <span style="font-size: 18px;transform: rotate(90deg);" class="material-icons">
                    sync
                </span>
                <span class="__profile-settings-personal-verification-status-label">
                    {{userView.kycVerificationStatus}}
                </span>
            </div>
            <div *ngIf="userView.kycComplete===false && userView.kycRejected===true"
                class="__profile-settings-personal-verification-status-container __profile-settings-personal-verification-status-failed">
                <span style="font-size: 18px;" class="material-icons">
                    error
                </span>
                <span class="__profile-settings-personal-verification-status-label">
                    Rejected
                </span>
            </div>
            <button *ngIf="!userView.kycLevelMax" class="__outlined-button" type="button"
                [disabled]="!userView.kycVerificationAvailable" (click)="verifyKyc()">
                {{userView.kycLevelIncreasable ? 'INCREASE LEVEL' : 'VERIFY PROFILE'}}
            </button>
        </div>
    </div>
    <div class="__profile-settings-personal-info-editor-container">
        <app-profile-info-textbox [label]="'Email'" [value]="userView.email" [editable]=false>
        </app-profile-info-textbox>
        <div *ngIf="userView.userType?.id===USER_TYPE.Personal">
            <app-profile-info-textbox [label]="'First Name'" [value]="userView.firstName" [required]=true
                [editable]="kycApproved" (onComplete)="changeFirstName($event)"></app-profile-info-textbox>
            <app-profile-info-textbox [label]="'Last name'" [value]="userView.lastName" [required]=true
            [editable]="kycApproved" (onComplete)="changeLastName($event)"></app-profile-info-textbox>
            <app-profile-info-datebox [label]="'Date of birth'" [value]="userView.birthday"
            [editable]="kycApproved" (onComplete)="changeBirthDate($event)"></app-profile-info-datebox>
        </div>
        <div *ngIf="userView.userType?.id===USER_TYPE.Merchant">
            <app-profile-info-textbox [label]="'Company name'" [value]="userView.company" [required]=true
            [editable]="kycApproved" (onComplete)="changeFirstName($event)"></app-profile-info-textbox>
        </div>
        <app-profile-info-textbox [label]="'Address 1'" [value]="userView.street" [editable]="kycApproved" (onComplete)="changeStreet($event)">
        </app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Address 2'" [value]="userView.subStreet" [editable]="kycApproved"
            (onComplete)="changeSubStreet($event)"></app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Building name'" [value]="userView.buildingName" [editable]="kycApproved" 
            (onComplete)="changeBuildingName($event)"></app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Building number'" [value]="userView.buildingNumber" [editable]="kycApproved" 
            (onComplete)="changeBuildingNumber($event)"></app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Flat number'" [value]="userView.flatNumber" [editable]="kycApproved" 
            (onComplete)="changeFlatNumber($event)"></app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Town'" [value]="userView.town" [editable]="kycApproved" (onComplete)="changeTown($event)">
        </app-profile-info-textbox>
        <app-profile-info-textbox [label]="'Post code'" [value]="userView.postCode" [editable]="kycApproved"
            (onComplete)="changePostCode($event)"></app-profile-info-textbox>
        <app-profile-info-textbox [label]="'State'" [value]="userView.stateName" [editable]="kycApproved" (onComplete)="changeState($event)">
        </app-profile-info-textbox>
        <app-profile-info-dropbox [label]="'Country'" [value]="userView.countryId" [dataList]="countryList"
            [required]=true [editable]="kycApproved" (onComplete)="changeCountry($event)"></app-profile-info-dropbox>
        <app-profile-info-textbox [label]="'Phone'" [value]="userView.phone" [editable]="kycApproved" (onComplete)="changePhone($event)">
        </app-profile-info-textbox>
        <app-profile-info-dropbox [label]="'Default Crypto'" [value]="userView.cryptoCurrency" [dataList]="cryptoList"
            [required]=true (onComplete)="changeCrypto($event)"></app-profile-info-dropbox>
        <app-profile-info-dropbox [label]="'Default Fiat'" [value]="userView.fiatCurrency" [dataList]="fiatList"
            [required]=true (onComplete)="changeFiat($event)"></app-profile-info-dropbox>
    </div>
</div>